================================================================================
                    MIGRACI√ìN DE RAILWAY A VERCEL - INMOBILIARIA
================================================================================

üìÖ FECHA: $(Get-Date -Format "dd/MM/yyyy HH:mm")
üéØ PROYECTO: Inmobiliaria React + Express + MongoDB
üîÑ MIGRACI√ìN: Railway ‚Üí Vercel

================================================================================
                                RESUMEN DE CAMBIOS
================================================================================

‚úÖ ARCHIVOS CREADOS:
- vercel.json (Configuraci√≥n principal de Vercel)
- api/index.ts (Handler de API para Vercel)
- env.example (Variables de entorno necesarias)
- VERCEL_DEPLOY.md (Gu√≠a completa de deploy)

‚úÖ ARCHIVOS MODIFICADOS:
- package.json (Agregado script vercel-build)
- server/src/index.ts (Compatibilidad con Vercel)

================================================================================
                            CONFIGURACI√ìN DE VERCEL
================================================================================

üìÅ ESTRUCTURA DEL PROYECTO:
/
‚îú‚îÄ‚îÄ client/          # Frontend React (Vite)
‚îú‚îÄ‚îÄ server/          # Backend Express
‚îú‚îÄ‚îÄ api/            # API Routes de Vercel
‚îú‚îÄ‚îÄ vercel.json     # Configuraci√≥n de Vercel
‚îî‚îÄ‚îÄ package.json    # Scripts y dependencias

üîß CONFIGURACI√ìN EN vercel.json:
{
  "version": 2,
  "builds": [
    {
      "src": "client/package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    },
    {
      "src": "server/src/**/*.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/server/src/index.ts"
    },
    {
      "src": "/(.*)",
      "dest": "/client/dist/$1"
    }
  ],
  "functions": {
    "server/src/**/*.ts": {
      "runtime": "nodejs18.x"
    }
  },
  "env": {
    "NODE_ENV": "production"
  }
}

================================================================================
                            VARIABLES DE ENTORNO
================================================================================

üîê VARIABLES NECESARIAS EN VERCEL:
MONGO_URI=mongodb+srv://usuario:password@cluster.mongodb.net/inmobiliaria?retryWrites=true&w=majority
JWT_SECRET=tu_jwt_secret_muy_seguro_aqui
ADMIN_USERNAME=admin
ADMIN_PASSWORD=tu_password_admin_seguro
NODE_ENV=production
PORT=4000

üìù INSTRUCCIONES PARA CONFIGURAR:
1. Ve al dashboard de Vercel
2. Selecciona tu proyecto
3. Ve a Settings > Environment Variables
4. Agrega cada variable una por una
5. Aseg√∫rate de marcar "Production" para todas

================================================================================
                            PASOS PARA EL DEPLOY
================================================================================

üöÄ OPCI√ìN 1: DEPLOY DESDE GITHUB (RECOMENDADO)
1. Sube tu c√≥digo a GitHub (si no lo has hecho)
2. Ve a https://vercel.com y haz login
3. Click en "New Project"
4. Importa tu repositorio de GitHub
5. Configura el proyecto:
   - Framework Preset: Other
   - Root Directory: ./ (ra√≠z del proyecto)
   - Build Command: npm run vercel-build
   - Output Directory: client/dist
6. Agrega las variables de entorno
7. Click en "Deploy"

üöÄ OPCI√ìN 2: DEPLOY DESDE TERMINAL
1. Instalar Vercel CLI:
   npm i -g vercel

2. Login en Vercel:
   vercel login

3. Deploy:
   vercel --prod

================================================================================
                            SCRIPTS ACTUALIZADOS
================================================================================

üì¶ PACKAGE.JSON - SCRIPTS AGREGADOS:
"vercel-build": "npm run build:client"

üîß SCRIPTS DISPONIBLES:
- npm run dev (Desarrollo local)
- npm run build (Build completo)
- npm run vercel-build (Build para Vercel)
- npm start (Iniciar servidor)

================================================================================
                            CAMBIOS EN EL SERVIDOR
================================================================================

üîß SERVER/SRC/INDEX.TS - MODIFICACIONES:
1. Exportaci√≥n de la app Express para Vercel
2. Detecci√≥n de entorno Vercel (process.env.VERCEL !== '1')
3. CORS actualizado para dominios de Vercel
4. Configuraci√≥n de servidor solo para desarrollo local

üåê CORS CONFIGURADO PARA:
- *.vercel.app
- *.vercel.dev
- localhost:3000
- localhost:5000
- localhost:5001

================================================================================
                            DIFERENCIAS RAILWAY vs VERCEL
================================================================================

| ASPECTO          | RAILWAY                    | VERCEL                      |
|------------------|----------------------------|-----------------------------|
| Arquitectura     | Servidor tradicional       | Serverless Functions        |
| Base de datos    | MongoDB Atlas              | MongoDB Atlas (igual)       |
| Variables env    | Dashboard Railway          | Dashboard Vercel            |
| Logs             | Railway CLI                | Vercel CLI o Dashboard      |
| Dominio          | *.railway.app              | *.vercel.app                |
| Escalabilidad    | Manual                     | Autom√°tica                  |
| Costo            | Por uso de recursos        | Por requests/bandwidth      |

================================================================================
                            URLS DEL DEPLOY
================================================================================

üåê URLs DESPU√âS DEL DEPLOY:
- Frontend: https://tu-proyecto.vercel.app
- API: https://tu-proyecto.vercel.app/api/*
- Health Check: https://tu-proyecto.vercel.app/api/health
- Login Admin: https://tu-proyecto.vercel.app/api/login

================================================================================
                            VERIFICACI√ìN DEL DEPLOY
================================================================================

‚úÖ CHECKLIST DE VERIFICACI√ìN:
1. Frontend carga correctamente
2. API responde en /api/health
3. Login de admin funciona
4. CORS no bloquea requests
5. Base de datos conecta correctamente
6. Variables de entorno est√°n configuradas

üîç COMANDOS DE VERIFICACI√ìN:
curl https://tu-proyecto.vercel.app/api/health
curl -X POST https://tu-proyecto.vercel.app/api/login -d '{"username":"admin","password":"tu_password"}'

================================================================================
                            TROUBLESHOOTING
================================================================================

üêõ PROBLEMAS COMUNES Y SOLUCIONES:

1. ERROR DE CORS:
   - Verificar que dominios est√©n en corsOptions
   - Revisar headers en api/index.ts

2. ERROR DE BASE DE DATOS:
   - Verificar MONGO_URI en variables de entorno
   - Comprobar conexi√≥n a MongoDB Atlas

3. ERROR DE BUILD:
   - Verificar dependencias en package.json
   - Revisar errores de TypeScript
   - Comprobar que vercel-build script existe

4. ERROR 500 EN API:
   - Revisar logs en dashboard de Vercel
   - Verificar que todas las variables est√©n configuradas
   - Comprobar que la app Express se exporta correctamente

================================================================================
                            MONITOREO Y LOGS
================================================================================

üìä HERRAMIENTAS DE MONITOREO:
- Dashboard Vercel > Functions > Logs
- Dashboard Vercel > Analytics
- Dashboard Vercel > Speed Insights

üîç COMANDOS √öTILES:
- vercel logs (Ver logs desde terminal)
- vercel --prod (Deploy de producci√≥n)
- vercel env ls (Listar variables de entorno)

================================================================================
                            ACTUALIZACIONES FUTURAS
================================================================================

üîÑ PARA ACTUALIZAR EL DEPLOY:
1. Hacer cambios en el c√≥digo
2. Commit y push a GitHub (si tienes auto-deploy)
3. O ejecutar: vercel --prod

üìù NOTAS IMPORTANTES:
- Vercel hace auto-deploy desde GitHub por defecto
- Los cambios se reflejan autom√°ticamente
- Siempre verificar que las variables de entorno est√©n actualizadas

================================================================================
                            CONTACTO Y SOPORTE
================================================================================

üìö DOCUMENTACI√ìN:
- Vercel Docs: https://vercel.com/docs
- Vercel CLI: https://vercel.com/docs/cli
- MongoDB Atlas: https://docs.atlas.mongodb.com

üÜò SOPORTE:
- Vercel Support: https://vercel.com/support
- GitHub Issues: Para problemas del c√≥digo

================================================================================
                                ¬°LISTO!
================================================================================

üéâ TU PROYECTO INMOBILIARIA EST√Å LISTO PARA VERCEL:

‚úÖ Frontend React optimizado
‚úÖ API Express serverless
‚úÖ Base de datos MongoDB Atlas
‚úÖ Autenticaci√≥n JWT
‚úÖ CORS configurado
‚úÖ Variables de entorno seguras
‚úÖ Documentaci√≥n completa

üöÄ SIGUIENTE PASO: Hacer el deploy siguiendo las instrucciones de arriba

================================================================================
                            FIN DEL DOCUMENTO
================================================================================
